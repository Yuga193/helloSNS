<!DOCTYPE html>
<html lang="jp">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="stylesheet" href="{{ url_for('static', filename='src/style.css') }}">
        <title>チャット</title>
    </head>
    <body>
        <div class="flex flex-col h-screen bg-gradient-to-b from-red-200 to-teal-50">
            <div class="flex items-center justify-between bg-cyan-100 p-4">
                <a href="{{ url_for('messages') }}">
                    <button class="px-4 py-2 text-lg font-semibold rounded bg-neutral-200 hover:bg-neutral-300 hover:shadow-md transition">退出</button>
                </a>
                <h2 class="text-lg font-bold">{{ other_user_name }}</h2>
                <div style="width: 64px;"> <!-- バランスを取るための空の要素 --></div>
            </div>
            <div class="flex-grow overflow-auto">
                {% for message in messages %}
                    <div class="{% if message.sender_id == current_user_id %}text-right{% else %}text-left{% endif %} m-2">
                        <div class="{% if message.sender_id == current_user_id %}bg-green-200 ml-auto{% else %}bg-white mr-auto{% endif %} p-4 rounded-lg" style="width: fit-content;">
                            <p>{{ messages['content'] }}</p>
                        </div>
                        <div class="{% if message.sender_id == current_user_id %}text-right{% else %}text-left{% endif %} text-sm text-gray-600">
                            {{ message.timestamp }}
                        </div>
                    </div>
                {% endfor %}
            </div> 
            <div>
                <section class="w-full bottom-0 relative">
                    <form action="{{ url_for('send_message', chat_session_id=chat_session_id) }}" method="post" class="flex items-end">
                        <textarea class="border border-black flex-grow ml-4 mr-4 rounded-md" id="comment_body" name="content" rows="4" placeholder="メッセージを入力してください"></textarea>
                        <div class="fixed bottom-0 right-0 mr-7">
                            <button class="button-svg" type="submit">
                            <svg fill="#000000" width="24" height="24" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve" class="w-6 h-6">
                            <path d="M508.645,18.449c-2.929-2.704-7.133-3.51-10.826-2.085L6.715,204.446c-3.541,1.356-6.066,4.515-6.607,8.264
                            c-0.541,3.75,0.985,7.496,3.995,9.796l152.127,116.747c-0.004,0.116-0.575,0.224-0.575,0.342v83.592
                            c0,3.851,2.663,7.393,6.061,9.213c1.541,0.827,3.51,1.236,5.199,1.236c2.026,0,4.181-0.593,5.931-1.756l56.12-37.367
                            l130.369,99.669c1.848,1.413,4.099,2.149,6.365,2.149c1.087,0,2.186-0.169,3.248-0.516c3.27-1.066,5.811-3.672,6.786-6.974
                            L511.571,29.082C512.698,25.271,511.563,21.148,508.645,18.449z M170.506,321.508c-0.385,0.36-0.7,0.763-1.019,1.163
                            L31.659,217.272L456.525,54.557L170.506,321.508z M176.552,403.661v-48.454l33.852,25.887L176.552,403.661z M359.996,468.354
                            l-121.63-93.012c-1.263-1.77-2.975-3.029-4.883-3.733l-47.29-36.163L480.392,60.86L359.996,468.354z"/>
                            </svg>
                            </button>
                        </div>
                    </form>
                </section>
            </div>
        </div>
    <body>
</html>

